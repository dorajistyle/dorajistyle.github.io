<!DOCTYPE html>
<html lang="ko">
<head>
	<!-- Meta -->
	<meta charset="utf-8" />

	<!-- Mobile viewport optimized: h5bp.com/viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

	<!-- Use the .htaccess and remove these lines to avoid edge case issues.
	   More info: h5bp.com/i/378 -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<!-- Our site title and description -->
	<title>[RoR] Ruby on Rails Cheat Sheet | 월풍도원(月風道院) STATIC Version - Delight on the Simple Life</title>
	<meta name="description" content="방랑자의 이야기 STATIC 버전.(STATIC version of stories about vagabond.)" />
	<meta name="keywords" content="여행, 명상, 철학, 방랑, 행복, 인생, IT, vagabond, travel, trip, meditation, philosophy, happiness, life" />
	<meta name="author" content="JOONGSEOB VITO KIM" />

<meta property="og:title" content="[RoR] Ruby on Rails Cheat Sheet | 월풍도원(月風道院) STATIC Version - Delight on the Simple Life">
<meta property="og:description" content="방랑자의 이야기 STATIC 버전.(STATIC version of stories about vagabond.)">
<meta property="og:type" content="article">
<meta property="og:url" content="http://dorajistyle.net">
<meta property="og:site_name" content="월풍도원(月風道院) STATIC Version - Delight on the Simple Life">
<meta name="twitter:card" content="방랑자의 이야기 STATIC 버전.(STATIC version of stories about vagabond.)">
<meta name="twitter:url" content="http://dorajistyle.net">
<meta name="twitter:title" content="[RoR] Ruby on Rails Cheat Sheet | 월풍도원(月風道院) STATIC Version - Delight on the Simple Life">
<meta name="twitter:description" content="방랑자의 이야기 STATIC 버전.(STATIC version of stories about vagabond.)">
<meta itemprop="name" content="[RoR] Ruby on Rails Cheat Sheet | 월풍도원(月風道院) STATIC Version - Delight on the Simple Life">
<meta itemprop="description" content="방랑자의 이야기 STATIC 버전.(STATIC version of stories about vagabond.)">

	<!-- Output DocPad produced meta elements -->
	<meta name="generator" content="DocPad v6.69.0" />

	<!-- Icons -->
    <link rel="shortcut icon" href="icons/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="icons/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="icons/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="icons/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="icons/apple-touch-icon-57-precomposed.png">

	<!-- Shims: IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
		<script async src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link  rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css" /><link  rel="stylesheet" href="http://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css" /><link  rel="stylesheet" href="/styles/style.css" />
	
</head>
<body>

<!-- Markup -->
<div class="pure-g-r" id="layout">
	
	<div class="sidebar pure-u">
<header class="header">
<hgroup>
      <a href="/"><img class="logo" src="/images/logo.jpg" /></a>
        <h3 class="brand-title">IT 이야기</h3>
        <h4 class="brand-tagline">소프트웨어 개발과 IT전반에 걸친 이야기.</h4>
</hgroup>
		<nav id="nav-horizontal-menu" class="nav">

			<ul id="std-menu-items" class="nav-list">
	        		<li class="nav-item"><a href="/" class="pure-button"><i class="ion-ios7-home"></i></a></li>
                                
				
					<li typeof="sioc:Page" about="/IT/3D.html" class="nav-item ">
						<a class="pure-button" href="/IT/3D.html" property="dc:title">3D</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/index.html" class="nav-item ">
						<a class="pure-button" href="/IT/index.html" property="dc:title">IT</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/OS.html" class="nav-item ">
						<a class="pure-button" href="/IT/OS.html" property="dc:title">OS</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/app.html" class="nav-item ">
						<a class="pure-button" href="/IT/app.html" property="dc:title">app</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/blog.html" class="nav-item ">
						<a class="pure-button" href="/IT/blog.html" property="dc:title">blog</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/db.html" class="nav-item ">
						<a class="pure-button" href="/IT/db.html" property="dc:title">db</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/development.html" class="nav-item ">
						<a class="pure-button" href="/IT/development.html" property="dc:title">development</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/etc.html" class="nav-item ">
						<a class="pure-button" href="/IT/etc.html" property="dc:title">etc</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/mobile.html" class="nav-item ">
						<a class="pure-button" href="/IT/mobile.html" property="dc:title">mobile</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/sccm.html" class="nav-item ">
						<a class="pure-button" href="/IT/sccm.html" property="dc:title">sccm</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/testing.html" class="nav-item ">
						<a class="pure-button" href="/IT/testing.html" property="dc:title">testing</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/tip.html" class="nav-item ">
						<a class="pure-button" href="/IT/tip.html" property="dc:title">tip</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/web.html" class="nav-item ">
						<a class="pure-button" href="/IT/web.html" property="dc:title">web</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/이론.html" class="nav-item ">
						<a class="pure-button" href="/IT/이론.html" property="dc:title">이론</a>
					</li>
				
					<li typeof="sioc:Page" about="/IT/환경.html" class="nav-item ">
						<a class="pure-button" href="/IT/환경.html" property="dc:title">환경</a>
					</li>
				
                           
			</ul>
		</nav>
                </header>
</div>



<div class="pure-u-1">
    <div class="content">
    <div class="posts">
<article id="post" class="post">
    <header class="post-header">
    
    <h1 class="post-title">[RoR] Ruby on Rails Cheat Sheet</h1>
    
    </header>
    <div class="post-content">
        <div align="center">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- static_blog_top -->
<ins class="adsbygoogle"
     style="display:inline-block;width:336px;height:280px"
     data-ad-client="ca-pub-4159714136965100"
     data-ad-slot="8471411541"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
 
        <p>
        <h2 id="article_summary" class="summary">Ruby on Rails Cheat Sheet</h2><br /><h3>rails 데이터 타입 </h3><p><code>:string, :text, :integer, :float, :decimal, :datetime, :timestamp, :time, :date, :binary, :boolean</code></p><h3>Rails Mimetype&nbsp;&nbsp;&nbsp; </h3><p><code>"./."&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :all<br />"text/plain"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :text<br />"text/html"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :html<br />"application/xhtml+xml"&nbsp;&nbsp;&nbsp; =&gt; :html<br />"text/javascript"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :js<br />"application/javascript"&nbsp;&nbsp; =&gt; :js<br />"application/x-javascript" =&gt; :js<br />"text/calendar"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :ics&nbsp;&nbsp;<br />"text/csv"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :csv&nbsp;&nbsp;<br />"application/xml"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :xml<br />"text/xml"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :xml<br />"application/x-xml"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :xml<br />"text/yaml"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :yaml<br />"application/x-yaml"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :yaml<br />"application/rss+xml"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :rss&nbsp;&nbsp;<br />"application/atom+xml"&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :atom&nbsp;<br />"application/json"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :json<br />"text/x-json"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; :json</code></p><h3>bundle asset precompile </h3><p><code>bundle exec rake assets:precompile RAILS_ENV="production"<br />rake assets:clean< add below code if you want development environment with out precompile config.serve.static.assets = false application.rb use Bundler.require(:default, :assets, Rails.env) instead of Bundler.require(*Rails.groups(:assets =&gt; %w(development test)))</code></p><h3>compile assets locally</h3><p><code>Put below into development.rb<br />config.assets.prefix = "/temp-assets"<br />Also put below into application.rb<br />config.assets.initialize.on.precompile = false</code></p><h3>rails logger</h3><p><code>Rails.logger.info "My info message"<br />Rails.logger.debug "My debugging message"<br />Rails.logger.warn "My warning message"</code></p><h3>Environment Log level </h3><p><code>config.log_level = :debug, :info, :warn, :error, and :fatal</code></p><h3>Validation text length CR filter</h3><p><code>before.validation :replace.cr<br />&nbsp; protected<br />&nbsp; def replace.cr<br />&nbsp;&nbsp;&nbsp; if self.description.changed?<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.description.gsub!(/\r\n?/, "\n")<br />&nbsp;&nbsp;&nbsp; end<br />&nbsp; end</code></p><h3>validation locale</h3><p><code><br />// config/locales/en.yml<br />en:<br />&nbsp; activerecord:<br />&nbsp;&nbsp;&nbsp; attributes:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; email: "E-mail address"<br />&nbsp;&nbsp;&nbsp; errors:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; models:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; attributes:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; email:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blank: "is required"<br />If you are using mongoid, replace activerecord: with mongoid:</code></p><h3>Validate associated</h3><p><code>The answer to this turned out to be rather simple. On the parent model, you simply explicitly declare that you want the associated children validated.<br />parent.rb<br />validates_associated :children</code></p><h3>Validate if persisted? or new_record?</h3><p><code>validates.uniqueness.of :nickname, :message =&gt; I18n.t("user.already.taken"), :if =&gt; :new.record?<br />validates.uniqueness.of :nickname, :message =&gt; I18n.t("user.already_taken"), :unless =&gt; :persisted?</code></p><h3>Session Store in rails 3</h3><p><code>Use the database for sessions instead of the cookie-based default, which shouldn't be used to store highly confidential information<br />Create the session table with<br />rake db:sessions:create<br />Run the migration<br />rake db:migrate<br />Make sure you also tell rails to use ActiveRecord to manage your sessions too.<br />Rails 3<br />config/initializers/session.store.rb:<br />Rails.application.config.session.store :active.record.store</code></p><h3>DB Migrate Production</h3><p><code>rake db:migrate RAILS_ENV="production"</code></p><h3>get rails environment</h3><p><code>Rails.env<br />env["SERVER_NAME"]</code></p><h3>rails template</h3><p><code>rake print --silent RECIPES=jquery,haml,rspec,cucumber,guard,mongoid,action.mailer,devise,add.user,home.page,home.page.users,seed.database,users.page,css.setup,application.layout,html5,navigation,cleanup,ban.spiders,extras,git,compass,omniauth,omniauth.email,backbone &gt; ~/Desktop/backbone.template.txt<br />Could you please run it again using the "-T -O -J" flags? As in<br />rails new template_test -m https://github.com/fortuity/rails3-application-templates/raw/master/rails3-mongoid-devise-template.rb -T -O -J<br />http://blog.dominicsayers.com/2011/08/16/howto-use-a-rails-template-from-github-on-windows/</code></p><h3>thin start</h3><p><code>D:\dev\ruby192\bin\ruby.exe -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) D:/dev/workspace/baksisi/script/rails server thin -b 127.0.0.1 -p 3002 -e development<br />ruby ./script/rails server thin -b smoke-free-online.de -p 3000 -e development -d<br />thin start</code></p><h3>Middle Man</h3><p><code>"server" was called incorrectly. Call as "middleman server [-p 4567] [-e development]".<br />"middleman server [-p 4567] [-e development]" instead of "middleman server -p 4567 -e development</code></p><h3>DB migration</h3><p><code>Rails g migration change.data.type.for.table_column</code></p><h3>I18n</h3><h4>locale join</h4><p><code>config/application.rb<br />config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '.*', '..{rb,yml}')]</code></p><h4>locale path</h4><p><code>routes.rb<br />&nbsp; match '/:locale' =&gt; "home#index"<br />&nbsp; root :to =&gt; "home#index"<br />&nbsp; scope "/:locale" do&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; controller :models do<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; something<br />&nbsp;&nbsp;&nbsp; end<br />&nbsp;&nbsp;&nbsp; resources :models, :only =&gt; :show<br />ApplicationController<br />&nbsp; def default.url.options(options = {})<br />&nbsp;&nbsp;&nbsp; options.merge!({:locale =&gt; I18n.locale})<br />&nbsp; end&nbsp;&nbsp;&nbsp;</code></p><h4>Localize</h4><p><code>I18n.l Time.now, :format =&gt; :short,&nbsp; :locale =&gt; :"ko"</code></p><h4>Pluralization</h4><p><code>ko:<br />&nbsp; pears:<br />&nbsp;&nbsp;&nbsp; zero: ko.zero<br />&nbsp;&nbsp;&nbsp; one: ko.one<br />&nbsp;&nbsp;&nbsp; few: ko.few<br />&nbsp;&nbsp;&nbsp; other: ko.other</code></p><h4>generate rake tasks</h4><p><code>rails g task namespace task1 task2<br />rake -T | grep namespace</code></p><h3>세션 저장</h3><p><code>config.session.store :cookie.store, :key =&gt; '.baksisi.session', :domain =&gt; :all<br />environment.rb 메일러에 레이아웃을 지정하고 싶다면.<br />DeviseMailer.layout "OMG"</code></p><h3>show routes</h3><p><code>rake routes</code></p><h3>SASS</h3><p><code>config/application.rb:<br />config.generators.stylesheet_engine = :sass<br />sass-convert style.sass style.scss</code></p><h3>Trouble Shootings</h3><h4>uninitialized constant</h4><p><code>file name confirm (if file name capital, it can be occurred.)</code></p><h4>guard-livereload error</h4><p><code>gem install eventmachine --pre&nbsp;</code></p><h4>open-uri.rb file in C:/Ruby1.9.2/lib/ruby/1.9.1/ (of course your path might be different).</h4><p><code>http.verify.mode = options[:ssl.verify.mode] || OpenSSL::SSL::VERIFY.NONE</code></p><h4>[ERROR] V8 is no longer usable</h4><p><code>ulimit -v unlimited&nbsp;&nbsp;</code></p><h3>CSV Data Handling </h3><p><code>http://www.ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html</code></p><h3>get action information at view </h3><p><code>&nbsp;&nbsp;&nbsp; params[:action]</code></p><h3>HAML </h3><p><code>rails helper using haml<br />&nbsp;<br />def section(name)<br />haml.tag(:div, :class =&gt; 'section') do<br />&nbsp; haml.tag(:h2, name)<br />&nbsp; haml.tag(:p, :class =&gt; 'section.content') do<br />&nbsp;&nbsp;&nbsp; yield<br />&nbsp; end<br />end<br />end<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<br />def content.box<br />&nbsp; haml.tag :div, :class =&gt; "holder" do<br />&nbsp;&nbsp;&nbsp; haml.tag :div, :class =&gt; "top"<br />&nbsp;&nbsp;&nbsp; haml.tag :div, :class =&gt; "content" do<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yield<br />&nbsp;&nbsp;&nbsp; haml.tag :div, :class =&gt; "bottom"<br />&nbsp; end<br />end<br />and in haml<br />%html<br />&nbsp; %head<br />&nbsp; %body<br />&nbsp;&nbsp;&nbsp; Maybee some content here.<br />&nbsp;&nbsp;&nbsp; - content.box do<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Content that goes in the content_box like news or stuff&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; &nbsp;<br />fields_for with index<br />&lt;% @questions.each.with.index do |question,index| %&gt;<br />&nbsp;&nbsp;&nbsp; &lt;% f.fields.for :questions, question do |fq| %&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # here you have both the 'question' object and the current 'index'<br />&nbsp;&nbsp;&nbsp; &lt;% end %&gt;<br />&lt;% end %&gt;<br />It&rsquo;s also possible to specify the instance to be used:<br />&lt;%= form.for @person do |person.form| %&gt;<br />...<br />&lt;% @person.projects.each do |project| %&gt;<br />&nbsp; &lt;% if project.active? %&gt;<br />&nbsp;&nbsp;&nbsp; &lt;%= person.form.fields.for :projects, project do |project.fields| %&gt;<br />&nbsp;&nbsp;&nbsp; &nbsp; Name: &lt;%= project.fields.text_field :name %&gt;<br />&nbsp;&nbsp;&nbsp; &lt;% end %&gt;<br />&nbsp; &lt;% end %&gt;<br />&lt;% end %&gt;<br />&lt;% end %&gt;&nbsp;&nbsp;&nbsp; &nbsp;</code></p><h3>Rails Response</h3><p><code>namespace "api" do<br />&nbsp; resources :regions, :defaults =&gt; { :format =&gt; 'xml' }<br />end<br />Then you should be able to have the following work for your controller methods:<br />class Api::RegionsController &lt; ApplicationController<br />&nbsp; respond.to :xml, :json<br />&nbsp; def index<br />&nbsp;&nbsp;&nbsp; respond.with(@regions = Region.all)<br />&nbsp; end<br />end<br />rescue.from&nbsp; ActionController::MissingFile do |e|<br />&nbsp; # User's browser probably wont display this<br />&nbsp; # Content-Type is application/x-shockwave-flash<br />&nbsp; render :file =&gt; File.join(Rails.public.path, '404.html'), :status =&gt; 404<br />end</code></p><h3>show details or stream video</h3><p><code>def show<br />&nbsp; @media = Media.find params[:id]<br />&nbsp; respond.to do |format|<br />&nbsp;&nbsp;&nbsp; format.html<br />&nbsp;&nbsp;&nbsp; format.flv { send.file @media.path, :disposition =&gt; 'inline' }<br />&nbsp; end<br />end<br />render :file =&gt; File.join(Rails.public.path, '404.html'), :status =&gt; 404, :content.type =&gt; 'text/html'</code></p><h3>render with variable</h3><p><code>render :partial =&gt; "my/conejo", :locals =&gt; {:my.val =&gt; something}<br />render "my/liebre", :my.val =&gt; something</code></p><h3>scope</h3><p><code>default_scope order('id DESC')<br />Model.reorder('')<br />Model.unscoped</code></p><h3>render an other action in the controller, in js.</h3><p><code>&nbsp; render 'result', :id =&gt; @item.id, :format =&gt; :js<br />&nbsp;</code></p><h3>layout xhr?&nbsp;</h3><p><code>&nbsp; class ApplicationController &lt; ActionController::Base<br />&nbsp; layout proc{|c| c.request.xhr? ? false : "application" }<br />&nbsp; end<br />&nbsp; layout :layout.xhr?<br />&nbsp; def layout.xhr?<br />&nbsp;&nbsp;&nbsp; request.xhr? ? false : 'application'<br />&nbsp; end<br />&nbsp;</code></p><h3>AJAX Performance stale? and touch</h3><code><br />&nbsp;def show<br />&nbsp;&nbsp;&nbsp; @list_item = @list.list_items.find( params[ :id ] )<br />&nbsp;&nbsp;&nbsp; if stale?( :etag =&gt; @list_item, :last_modified =&gt; @list_item.updated_at.utc, :public =&gt; true )<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; respond_with( @list_item )<br />&nbsp;&nbsp;&nbsp; end<br />&nbsp; end<br />&nbsp; Also instead of the update_list method being called from after_save/destroy you can pass :touch =&gt; true to the belongs_to association which will do the same<br /></code><br /><h3>AJAX Handler - ?xhr</h3><code>respond_with( @something, :layout =&gt; !request.xhr? )<br />or<br />respond_to do |wants|<br />&nbsp; wants.html do<br />&nbsp;&nbsp;&nbsp; if request.xhr?<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; render :partial =&gt; "items"<br />&nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; render<br />&nbsp;&nbsp;&nbsp; end<br />&nbsp; end<br />end</code><br /><h3>Asset</h3><h4>exist</h4><p><code>YourApp::Application.assets.find_asset("#{asset}.file").nil?</code></p><h4>### pathname</h4><p><code>&lt;YourAppName&gt;::Application.assets.find_asset('Rails.png').pathname</code></p><h4>absolute asset_path in view using helper</h4><p><code>"#{request.protocol}#{request.host.with.port}#{asset.path('person/gravatar.default.png')}"<br />"#{request.scheme}://#{request.host.with.port}#{request.script_name}"</code></p><h3>Mailer </h3><h4>config</h4><p><code>environment/production.rb<br />&nbsp; config.action.mailer.default.url.options = {:host =&gt; 'localhost:3000',:locale =&gt;I18n.locale}<br />&nbsp; config.action.mailer.smtp.settings = {<br />&nbsp;&nbsp;&nbsp; :address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; "server.addr",<br />&nbsp;&nbsp;&nbsp; :port&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; 587,<br />&nbsp;&nbsp;&nbsp; :domain&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; "sever.domain",<br />&nbsp;&nbsp;&nbsp; :user.name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; "user.name",<br />&nbsp;&nbsp;&nbsp; :password&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; "user.password",<br />&nbsp;&nbsp;&nbsp; :authentication&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt; "plain",<br />&nbsp;&nbsp;&nbsp; :enable.starttls.auto =&gt; true<br />&nbsp; }&nbsp;<br />&nbsp; config.action.mailer.delivery.method = :smtp<br />&nbsp; config.action.mailer.perform.deliveries = true<br />&nbsp; config.action.mailer.raise.delivery.errors = false<br />&nbsp; config.action.mailer.default :charset =&gt; "utf-8"</code></p><h4>inline attachement </h4><h5>in mailer</h5><p><code>attachments.inline['blank'] = {<br />&nbsp;&nbsp;&nbsp; :data =&gt; File.read("#{Rails.root.to.s + '/app/assets/images/blank.png'}"),<br />&nbsp;&nbsp;&nbsp; :mime.type =&gt; "image/png",<br />&nbsp;&nbsp;&nbsp; :encoding =&gt; "base64"<br />}</code></p><h5>in view </h5><p><code>if @offer.image.nil?<br />&nbsp; = image.tag( attachments['blank'].url, :id =&gt; 'attachement.image', :width =&gt; "400", :height =&gt; "400")<br />&nbsp;</code></p><h3>validates in I18n </h3><p><code>%{attribute} - field name<br />%{model} - model name&nbsp;<br />%{count} - count</code></p><br /><h3>rescue log </h3><p><code>begin<br />&nbsp; ...some code...<br />rescue Exception =&gt; e<br />&nbsp; logger.error e.message<br />&nbsp;</code></p><p><h2>Ruby<br /></h2></p><h3>Iterate </h3><p><code>a.each.with.index do |item, index|<br />&nbsp; puts item, b[index]<br />end<br />array.each.slice(3) do |elements|<br />&nbsp; fire.the_event<br />end</code></p><h3>Timezone </h3><p><code>in client (js):<br />function set.time.zone.offset() {<br />&nbsp;&nbsp;&nbsp; var current.time = new Date();<br />&nbsp;&nbsp;&nbsp; $.cookie('time.zone', current.time.getTimezoneOffset());<br />}<br />in Application Controller:<br />before.filter :set.timezone<br />def set.timezone&nbsp;<br />&nbsp;min = request.cookies["time.zone"].to_i<br />&nbsp;Time.zone = ActiveSupport::TimeZone[-min.minutes]<br />end</code></p><h3>DateTime format </h3><p><code>&nbsp; %a - The abbreviated weekday name (Sun)<br />&amp;nbsp; %A - The&amp;nbsp; full&amp;nbsp; weekday&amp;nbsp; name (Sunday)<br />&nbsp; %b - The abbreviated month name (Jan)<br />&amp;nbsp; %B - The&amp;nbsp; full&amp;nbsp; month&amp;nbsp; name (January)<br />&nbsp; %c - The preferred local date and time representation<br />&nbsp; %d - Day of the month (01..31)<br />&nbsp; %H - Hour of the day, 24-hour clock (00..23)<br />&nbsp; %I - Hour of the day, 12-hour clock (01..12)<br />&nbsp; %j - Day of the year (001..366)<br />&nbsp; %m - Month of the year (01..12)<br />&nbsp; %M - Minute of the hour (00..59)<br />&nbsp; %p - Meridian indicator (AM&amp;nbsp; or&amp;nbsp;PM)<br />&nbsp; %S - Second of the minute (00..60)<br />&nbsp; %U - Week&nbsp; number&nbsp; of the current year,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; starting with the first Sunday as the first<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; day of the first week (00..53)<br />&nbsp; %W - Week&nbsp; number&nbsp; of the current year,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; starting with the first Monday as the first<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; day of the first week (00..53)<br />&nbsp; %w - Day of the week (Sunday is 0, 0..6)<br />&nbsp; %x - Preferred representation for the date alone, no time<br />&nbsp; %X - Preferred representation for the time alone, no date<br />&nbsp; %y - Year without a century (00..99)<br />&nbsp; %Y - Year with century<br />&nbsp; %Z - Time zone name<br />&nbsp; %% - Literal ``%'' character<br />&nbsp;&nbsp; t = Time.now<br />&nbsp;&nbsp; t.strftime("Printed on %m/%d/%Y")&nbsp;&nbsp; #=&gt; "Printed on 04/09/2003"<br />&nbsp;&nbsp; t.strftime("at %I:%M%p")&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #=&gt; "at 08:56AM"<br />&nbsp;&nbsp;<br />&nbsp;&nbsp; datetime seconds, hours, days, weeks, months, and years<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; Add below lines to one of your initializer files, e.g., config/environment.rb:<br />&nbsp;&nbsp;&nbsp; DateTime::DATE.FORMATS[:short]="short %Y-%m-%d %H:%M:%S"<br />&nbsp;&nbsp;&nbsp; Time::DATE.FORMATS[:short] = "short %Y-%m-%d %H:%M:%S"<br />&nbsp;&nbsp;&nbsp; Date::DATE.FORMATS[:short] = "short %Y-%m-%d"<br />&nbsp;&nbsp;&nbsp; modify view:<br />&nbsp;&nbsp;&nbsp; &lt;%= item.create_date.to_s(:short) %&gt;<br />distance_of_time_in_words(from_time, to_time = 0, include_seconds = false, options = {})<br />today = DateTime.now<br />=&gt; #&lt;DateTime: 441799066630193/180000000,-301/1440,2299161&gt;<br />birthday = Date.new(2008, 4, 10)<br />=&gt; #&lt;Date: 4909133/2,0,2299161&gt;<br />days_to_go = birthday - today<br />time_until = birthday - today<br />=&gt; Rational(22903369807, 180000000)<br />time_until.to_i&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # get the number of days until my birthday<br />=&gt; 127<br />hours,minutes,seconds,frac = Date.day_fraction.to_time(time_until)<br />[3053, 46, 57, Rational(1057, 180000000)]<br />- mm&nbsp; = (now-la&nbsp;&nbsp;&nbsp; st_cigarette).divmod(Rational(1, 1440))[0]<br />- past.days = mm / 1440<br />- past.hours = (mm % 1440) / 60<br />- past_minutes = mm % 60</code></p><h3>timezone </h3><p><code>def set_api_time_zone<br />&nbsp; utc_offset = current.user.session &amp;&amp; current.user.session.user ? current.user.session.user.time.zone.offset.to.i.minutes : 0<br />&nbsp; user.timezone = ActiveSupport::TimeZone[utc.offset]<br />&nbsp; Time.zone = user.timezone if user.timezone<br />&nbsp; Time.zone.today<br />&nbsp; Time.now.to.date<br />&nbsp;&nbsp;&nbsp; # =&gt; Thu, 19 May 2011<br />&nbsp; Time.now.in.time.zone('Melbourne').to_date<br />&nbsp;&nbsp;&nbsp; # =&gt; Fri, 20 May 2011<br />end</code></p><h3>Range step </h3><p><code>range.step(2) {|x| puts x}</code></p><br /><h3>benchmark </h3><p><code>require 'benchmark'<br />n = 1000000<br />def answer1 current.subdomain<br />&nbsp; case current.subdomain<br />&nbsp; when 'www', 'blog', 'foo', 'bar'<br />&nbsp; else nil<br />&nbsp; end<br />end<br />def answer2 current.subdomain<br />&nbsp; nil unless&nbsp; ["www", "blog", "foo", "bar"].include?(current.subdomain)<br />end<br />Benchmark.bmbm do |b|<br />&nbsp; b.report('answer1'){n.times{answer1('bar')}}<br />&nbsp; b.report('answer2'){n.times{answer2('bar')}}<br />end<br />Rehearsal -------------------------------------------<br />answer1&nbsp;&nbsp; 0.290000&nbsp;&nbsp; 0.000000&nbsp;&nbsp; 0.290000 (&nbsp; 0.286367)<br />answer2&nbsp;&nbsp; 1.170000&nbsp;&nbsp; 0.000000&nbsp;&nbsp; 1.170000 (&nbsp; 1.175492)<br />---------------------------------- total: 1.460000sec<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user&nbsp;&nbsp;&nbsp;&nbsp; system&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; total&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; real<br />answer1&nbsp;&nbsp; 0.290000&nbsp;&nbsp; 0.000000&nbsp;&nbsp; 0.290000 (&nbsp; 0.282610)<br />answer2&nbsp;&nbsp; 1.180000&nbsp;&nbsp; 0.000000&nbsp;&nbsp; 1.180000 (&nbsp; 1.186130)<br />Benchmark.bmbm do |b|<br />&nbsp; b.report('answer1'){n.times{answer1('hello')}}<br />&nbsp; b.report('answer2'){n.times{answer2('hello')}}<br />end<br />Rehearsal -------------------------------------------<br />answer1&nbsp;&nbsp; 0.250000&nbsp;&nbsp; 0.000000&nbsp;&nbsp; 0.250000 (&nbsp; 0.252618)<br />answer2&nbsp;&nbsp; 1.100000&nbsp;&nbsp; 0.000000&nbsp;&nbsp; 1.100000 (&nbsp; 1.091571)<br />---------------------------------- total: 1.350000sec<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user&nbsp;&nbsp;&nbsp;&nbsp; system&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; total&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; real<br />answer1&nbsp;&nbsp; 0.250000&nbsp;&nbsp; 0.000000&nbsp;&nbsp; 0.250000 (&nbsp; 0.251833)<br />answer2&nbsp;&nbsp; 1.090000&nbsp;&nbsp; 0.000000&nbsp;&nbsp; 1.090000 (&nbsp; 1.090418)</code></p><br /><h3>출처</h3><br /><ul><li>직접 작성</li><li><a href="http://www.ruby-doc.org/core-1.9.3/" target="_blank" title="Ruby 1.9.3">Ruby API</a></li><li><a href="http://guides.rubyonrails.org/" target="_blank" title="Ruby on Rails Guides">Ruby on Rails Guides</a> </li><li><a href="http://stackoverflow.com" target="_blank" title="Stack Overflow">Stack Overflow</a></li><li>google 검색</li></ul>
        </p>
        <div align="center">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- static bottom -->
<ins class="adsbygoogle"
style="display:inline-block;width:728px;height:90px"
data-ad-client="ca-pub-4159714136965100"
data-ad-slot="5066849540"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
 
    </div>
    
</article>
        </div>
    <div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
<script type="text/javascript">
    var disqus_shortname = 'dorajistyle-static';
    var disqus_url = 'http://dorajistyle.net/IT/web/[ror]-ruby-on-rails-cheat-sheet-2012-06-25.html';
    var disqus_identifier = disqus_url;
    var disqus_title = '[RoR] Ruby on Rails Cheat Sheet';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

    <div id="me">
    <p>
        <img src="http://www.gravatar.com/avatar/8791361c5e3bb3cfa949de550d87e27b?s=100" alt="JoongSeob Vito Kim" />
      한 줄의 코드와 몇 개의 단어로 디지털과 아날로그를 오가는 여행자.<br/> 
게으름뱅이를 위한 세상을 만드는 것이 삶의 목표이다.<br/>A vagabond who travels between digital and analog with a line of code and a few words.<br/> The goal of life is creating the milieu of lazybones.</p>
    <p>
       &#8226; <a href="https://github.com/dorajistyle" target="_blank" title="dorajistyle's GitHub"><i class="ion-social-github"></i>GitHub</a> &#8226; 
        <a href="#sendEmailForm" onClick="showEmailForm();"><i class="ion-email"></i>Email Me</a>
    </p>
</div>
<div class="ss-form"><form class="pure-form pure-form-stacked" onsubmit="return validateForm();" target="_private_message" action="" method="POST" id="sendEmailForm" hidden>
<fieldset>
<div class="pure-control-group"><div class="errorbox-good">
<div class="ss-item ss-item-required ss-text"><div class="ss-form-entry"><label for="entry_0" class="ss-q-title">보내는 분 성함 <span class="red">*</span></label><input name="entry.270478495" value="" class="ss-q-short pure-input-1-2" id="entry_270478495" type="text" placeholder="Name" aria-required="true" required=""></div></div></div></div>
<br>
<div class="pure-control-group"><div class="errorbox-good">
<div class="ss-item ss-item-required ss-text"><div class="ss-form-entry"> <label class="ss-q-title" for="entry_1">이메일 주소 <span class="red">*</span></label><input name="entry.2021847284" value="" class="ss-q-short pure-input-1-2" id="entry_2021847284" aria-required="true" required="" pattern=".*^[a-zA-Z0-9.!#$%&amp;amp;&#39;*+\-\/=?\^_`{|}~\-]+@[a-zA-Z0-9\-]+(?:\.[a-zA-Z0-9\-]+)*$.*" type="text" placeholder="email@address"></div></div></div></div><br>
<div class="pure-control-group"><div class="errorbox-good">
<div class="ss-item ss-item-required ss-paragraph-text"><div class="ss-form-entry"><label class="ss-q-title" for="entry_2">전하실 말씀 <span class="red">*</span></label><textarea name="entry.2125433964" rows="8" cols="75" class="pure-input-1-2 ss-q-long" id="entry_2125433964" placeholder="Have a nice day!!" aria-required="true" required=""></textarea></div></div></div></div><br>
<div class="pure-controls"><div class="errorbox-good">
<div class="ss-item"><div class="ss-form-entry"><label for="group_1798525724_1" class="ss-q-title pure-checkbox"><input type="checkbox" name="entry.1798525724" value="&#45348; (Yes)" id="group_1798525724_1" aria-required="true" role="checkbox"> 이메일을 보내시겠습니까?(Are you sure to send an email?)</label>
</div></div></div></div>
<br/>
<div class="pure-controls">
<input type="hidden" name="draftResponse" value="[,,&quot;7697741025179685837&quot;]
">
<input type="hidden" name="pageHistory" value="0">
<input type="hidden" name="fbzx" value="7697741025179685837">
<div class="ss-item ss-navigate"><div class="ss-form-entry" hidden>
<input type="submit" name="submit" id="ss-submit" class="pure-button pure-button-primary" value="메일 보내기"> 
</div>
<a class="pure-button submit" href="#" onclick="submitForm();">
    <i class="ion-paper-airplane"></i>
    메일 보내기
</a>
</div></div></fieldset></form></div>
 

    </div>

<footer>
		
	</footer>

	

</div>


	<div class="pure-u-1">
        <footer class="footer">
			&copy;  2014 JoongSeob Vito Kim
        </footer>
	</div>
</div>

	<!-- Scripts -->
	<script defer="defer"  src="/scripts/main.js"></script>
</body>
</html>
